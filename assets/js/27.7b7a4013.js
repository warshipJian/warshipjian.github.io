(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{378:function(t,s,a){"use strict";a.r(s);var n=a(26),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"linux的文件权限及符号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux的文件权限及符号"}},[t._v("#")]),t._v(" linux的文件权限及符号")]),t._v(" "),a("h3",{attrs:{id:"普通权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#普通权限"}},[t._v("#")]),t._v(" 普通权限")]),t._v(" "),a("p",[a("code",[t._v("r")]),t._v("-读\n"),a("code",[t._v("w")]),t._v("-写\n"),a("code",[t._v("x")]),t._v("-执行。\n注意:x权限对于目录来说是进入目录的权限。比如用root创建一个目录，去掉x权限，普通用户即使有r权限，也无法进入该目录。")]),t._v(" "),a("h3",{attrs:{id:"特殊权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特殊权限"}},[t._v("#")]),t._v(" 特殊权限")]),t._v(" "),a("p",[t._v("有三个:"),a("code",[t._v("SUID")]),t._v("，"),a("code",[t._v("SGID")]),t._v("，"),a("code",[t._v("Sticky")]),t._v("，其中"),a("code",[t._v("SUID")]),t._v("，"),a("code",[t._v("SGID")]),t._v("在"),a("code",[t._v("ls")]),t._v("命令中显示为"),a("code",[t._v("s")]),t._v("或大写"),a("code",[t._v("S")]),t._v("，"),a("code",[t._v("SUID")]),t._v("显示为"),a("code",[t._v("t")]),t._v("或大写"),a("code",[t._v("T")]),t._v("。")]),t._v(" "),a("h4",{attrs:{id:"suid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#suid"}},[t._v("#")]),t._v(" SUID")]),t._v(" "),a("p",[t._v("内核在确定进程的访问权限时，会看进程的euid和egid(effective id,有效id)。一个文件如果设置了SUID，它的euid等于该文件所属用户的uid，如果未设置，则等于当前用户的uid，gid同理。")]),t._v(" "),a("p",[t._v("比如用户bob的uid是1003，gid是1003，文件myfile的权限如下：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("-rw-rw-r-- 1 bob bob 3 Jan 23 07:32 myfile\n")])])]),a("p",[t._v("此时myfile的所属用户是bob，未设置SUID，则euid=bob的uid=1003。")]),t._v(" "),a("p",[t._v("如果给myfile设置了SUID位，当另一个用户tom(uid为1005)来运行myfile时，原本uid应为tom的1005，但由于设置了SUID，myfile的所属用户是bob，所以此时euid=bob的uid=1003")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("root@ubuntu01:/tmp# chmod u+s myfile \nroot@ubuntu01:/tmp# ls -al myfile\n-rwSrw-r-- 1 bob bob 3 Jan 23 07:32 myfile\n")])])]),a("p",[t._v("最常见的一个例子：用户的密码保存在/etc/shadow，但此文件只有root才能写，普通用户要修改密码时就通过SUID位临时获取root权限，写入密码。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("root@ubuntu01:/tmp# ls -al /usr/bin/passwd \n-rwsr-xr-x 1 root root 54256 May 16  2017 /usr/bin/passwd\n# 用户位设置了SUID\n")])])]),a("p",[t._v("除了"),a("code",[t._v("passwd")]),t._v("命令外，"),a("code",[t._v("ping")]),t._v("，"),a("code",[t._v("crontab")]),t._v("，"),a("code",[t._v("mount")]),t._v("等命令都有设置，可通过"),a("code",[t._v("find / -perm /4000")]),t._v(" 来查看系统内设置了SUID的文件")]),t._v(" "),a("p",[t._v("需注意的是SUID只对"),a("code",[t._v("二进制文件")]),t._v("有效，且是临时获取一下权限，进程结束时就释放了。")]),t._v(" "),a("p",[t._v("做个小实验验证下:")]),t._v(" "),a("p",[t._v("编辑文件setuid.c，添加如下代码:")]),t._v(" "),a("div",{staticClass:"language-c extra-class"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("#"),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<stdio.h>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("#"),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<unistd.h>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[t._v("#"),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<time.h>")]),t._v(" ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" real "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getuid")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" euid "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("geteuid")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  FILE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("fp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),t._v(" buff"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  time_t now "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打印用户的uid")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The REAL UID =: %d\\n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" real"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打印运行时的uid")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The EFFECTIVE UID =: %d\\n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" euid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 格式化一下当前时间 ")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("strftime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buff"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%Y-%m-%d %H:%M:%S"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("localtime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("now"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将时间写入只有root权限的文件中")]),t._v("\n  fp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fopen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/root/test.txt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fputs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%s"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("buff"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fputs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fclose")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打印下结果")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%s fputs current time to test.txt\\n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("buff"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("这段代码很简单：打印下用户的uid和运行时的uid(即内核认可的euid)，并将当前的时间写到root目录的test.txt文件中。")]),t._v(" "),a("p",[t._v("首先编译下：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("root@ubuntu01:/tmp# gcc -o setuid setuid.c\n")])])]),a("p",[t._v("查看下权限:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("root@ubuntu01:/tmp# ls -al setuid\n-rwxr-xr-x 1 root root 9120 Jan 23 08:00 setuid\n")])])]),a("p",[t._v("直接运行，可以看到root目录下增加了test.txt，uid是0，euid也是0，且/root/下有一个test.txt，里面写入了当前时间：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("root@ubuntu01:/tmp# ./setuid \nThe REAL UID =: 0\nThe EFFECTIVE UID =: 0\n2019-01-23 08:04:40 fputs current time to test.txt\nroot@ubuntu01:/tmp# cat /root/test.txt \n2019-01-23 08:04:40\n")])])]),a("p",[t._v("切换到bob用户来测试下:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("root@ubuntu01:/tmp# su bob\nbob@ubuntu01:/tmp$ ./setuid \nThe REAL UID =: 1003\nThe EFFECTIVE UID =: 1003\nSegmentation fault (core dumped)\n")])])]),a("p",[t._v("可以看到，uid和euid都是1003，由于普通用户无权限写入/root/test.txt，所以报错"),a("code",[t._v("Segmentation fault")]),t._v("了。")]),t._v(" "),a("p",[t._v("此时设置setuid的SUID，再用bob用户来运行试试:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# 设置SUID\nroot@ubuntu01:/tmp# chmod u+s setuid\nroot@ubuntu01:/tmp# ls -al setuid\n-rwsr-xr-x 1 root root 9120 Jan 23 08:00 setuid\n\n# 切换到bob来运行\nroot@ubuntu01:/tmp# su bob\nbob@ubuntu01:/tmp$ ./setuid \nThe REAL UID =: 1003\nThe EFFECTIVE UID =: 0\n2019-01-23 08:10:14 fputs current time to test.txt\nbob@ubuntu01:/tmp$ exit\nexit\n\n# 看下是否写入到了/root/test.txt \nroot@ubuntu01:/tmp# cat /root/test.txt \n2019-01-23 08:04:40\n2019-01-23 08:10:14\n")])])]),a("p",[t._v("可以看到当前的uid是1003，但运行时的uid变成0了，且将时间写到了/root/test.txt 中。")]),t._v(" "),a("h4",{attrs:{id:"sgid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sgid"}},[t._v("#")]),t._v(" SGID")]),t._v(" "),a("p",[t._v("sgid对文件设置时和suid的用途一致，对目录设置时，其作用是："),a("code",[t._v("在该目录下创建的文件将继承该目录属组的权限，而非创建者本身")]),t._v("。\n可做个列子验证下：")]),t._v(" "),a("p",[t._v("1.在tmp目录下创建一个sgid目录，且设置SGID：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("root@ubuntu01:/tmp# mkdir sgid\nroot@ubuntu01:/tmp# chmod o+w sgid\nroot@ubuntu01:/tmp# chmod g+s sgid\nroot@ubuntu01:/tmp# ls -al | grep sgid\ndrwxr-srwx   2 root root 4096 Jan 23 08:39 sgid\n")])])]),a("p",[t._v("2.切换到bob用户，在sgid目录下创建一个文件")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("root@ubuntu01:/tmp# su bob\nbob@ubuntu01:/tmp$ cd sgid\nbob@ubuntu01:/tmp/sgid$ touch test\n")])])]),a("p",[t._v("3.查看下权限")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("bob@ubuntu01:/tmp/sgid$ ls -al test\n-rw-rw-r-- 1 bob root 0 Jan 23 08:41 test\n")])])]),a("p",[t._v("可以看到该文件的属组是root")]),t._v(" "),a("h4",{attrs:{id:"sticky"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sticky"}},[t._v("#")]),t._v(" Sticky")]),t._v(" "),a("p",[t._v("Sticky又称SBIT，其作用是："),a("code",[t._v("在该目录创建的文件或目录只有创建者才有权限删除")]),t._v("。")]),t._v(" "),a("p",[t._v("最常见的例子就是"),a("code",[t._v("/tmp")]),t._v("目录了，所有用户都可以在该目录下创建文件或文件夹，其他用户可以查看，但无法删除。")]),t._v(" "),a("p",[t._v("可以做如下实验：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("使用普通用户bob在/tmp目录下创建一个文件test，且权限为777。\n切换到另一个普通用户scboy，可以对test进行读写，但无法删除，提示：\nrm: cannot remove 'test': Operation not permitted\n")])])]),a("h4",{attrs:{id:"设置suid，sgid，sticky"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置suid，sgid，sticky"}},[t._v("#")]),t._v(" 设置SUID，SGID，Sticky")]),t._v(" "),a("p",[t._v("SUID权限位是4，SGID权限位是2，Sticky权限位是1，同时设置SUID和SGID，则为6。")]),t._v(" "),a("p",[t._v("例子：\n1.设置myfile的SGID位，用户权限是rwx,组权限是r,其他权限r")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# 设置\nroot@ubuntu01:/tmp# chmod 2744 myfile\n# 查看下\nroot@ubuntu01:/tmp# ls -al myfile \n-rwxr-Sr-- 1 bob bob 3 Jan 23 07:32 myfile\n")])])]),a("p",[t._v("2.设置test目录的Sticky为，用户权限是rwx,组权限是rwx,其他权限rwx")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("root@ubuntu01:/tmp# mkdir test\nroot@ubuntu01:/tmp# chmod 1777 test\nroot@ubuntu01:/tmp# ls -al /tmp | grep test\ndrwxrwxrwt   2 root  root  4096 Jan 23 08:53 test\n")])])]),a("h3",{attrs:{id:"acl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#acl"}},[t._v("#")]),t._v(" ACL")]),t._v(" "),a("p",[t._v("如果某个目录配置了ACL权限，通过ls命令查看时，在权限部分会看到有个"),a("code",[t._v("+")]),t._v("号。")]),t._v(" "),a("h4",{attrs:{id:"安装acl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装acl"}},[t._v("#")]),t._v(" 安装acl")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# CentOS/Fedora/RHEL 中：\nyum install acl\n\n# Ubuntu/Debian 中:\napt install acl\n")])])]),a("p",[t._v("查看文件系统是否支持 ACL")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("root@ubuntu01:/tmp# dumpe2fs -h /dev/md126p2 | grep acl\ndumpe2fs 1.42.13 (17-May-2015)\nDefault mount options:    user_xattr acl\n")])])]),a("p",[t._v("加载 ACL 功能")]),t._v(" "),a("p",[t._v("如果 UNIX LIKE 支持 ACL 但是文件系统并不是默认加载此功能，可自己进行添加")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("root@ubuntu01:/tmp# mount -o remount,acl /\n")])])]),a("p",[t._v("同样也可以将acl加到/etc/fstab中，默认开机加载。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("LABEL=/                 /                       ext3    defaults,acl        1 1\n")])])]),a("h4",{attrs:{id:"测试下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试下"}},[t._v("#")]),t._v(" 测试下")]),t._v(" "),a("p",[t._v("1.用root在/tmp下创建一个acldir目录，给普通用户添加访问权限")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("mkdir acldir\nsetfacl -m u:bob:x ./acldir/ \n")])])]),a("p",[t._v("这时bob就可以进入acldir了")]),t._v(" "),a("p",[t._v("2.查看下该目录的acl信息")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("root@ubuntu01:/tmp# getfacl ./acldir/\n# file: acldir/\n# owner: root\n# group: root\nuser::rwx\nuser:bob:--x\ngroup::r-x\nmask::r-x\nother::r-x\n")])])]),a("p",[t._v("3.添加组acl权限")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("setfacl -m g:test:rx ./acldir/\n")])])]),a("p",[t._v("4.删除acl权限")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("setfacl -x u:bob ./acldir\nsetfacl -x g:test ./acldir\n")])])]),a("h3",{attrs:{id:"其他特殊符号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他特殊符号"}},[t._v("#")]),t._v(" 其他特殊符号")]),t._v(" "),a("ol",[a("li",[t._v("有时候用ls命令看某个目录或文件时，在权限部分的末尾有个"),a("code",[t._v(".")]),t._v("点号，这是开启了selinux时会有的，表示带有SELinux的安全上下文https://blog.csdn.net/xinlongabc/article/details/46801641")]),t._v(" "),a("li",[t._v("一个文件如果有多种访问措施，用"),a("code",[t._v("+")]),t._v("标记；如果同时用了selinux和acl，用"),a("code",[t._v("+")]),t._v("标记；如果只有acl，用"),a("code",[t._v("+")]),t._v("标记。")]),t._v(" "),a("li",[t._v("在mac系统中用ls查看时，可能会看到含有"),a("code",[t._v("@")]),t._v("符号，这个符号是osx特有的，表示某个文件或目录的一种特有属性，可用"),a("code",[t._v("xattr")]),t._v("命令来查看。")])])])}),[],!1,null,null,null);s.default=e.exports}}]);